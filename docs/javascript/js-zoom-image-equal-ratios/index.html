<html lang="zh-CN">

<head>
    <meta charset="utf-8" />
    <title>JS 等比例缩放图片</title>
    <link href="../../assets/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <script>
        function DrawImage(ImgD, iwidth, iheight) {
            //参数(原图片,允许的宽度,允许的高度)
            var image = new Image();
            image.src = ImgD.src;
            if (image.width > 0 && image.height > 0) {
                if (image.width / image.height >= iwidth / iheight) {
                    if (image.width > iwidth) {
                        ImgD.width = iwidth;
                        ImgD.height = (image.height * iwidth) / image.width;
                    } else {
                        // 不超过最大值
                        // ImgD.width = image.width;
                        // ImgD.height = image.height;
                        // 等比例
                        ImgD.width = (image.width * iheight) / image.height
                        ImgD.height = iheight;
                    }
                } else {
                    if (image.height > iheight) {
                        ImgD.width = (image.width * iheight) / image.height;
                        ImgD.height = iheight;
                    } else {
                        // 不超过最大值
                        // ImgD.width = image.width;
                        // ImgD.height = image.height;
                        // 等比例
                        ImgD.width = iwidth
                        ImgD.height = (image.height * iwidth) / image.width
                    }
                }
            }
        }
    </script>
</head>

<body>
    <div class="container">
        <div class="page-header">
            <h1>JS 等比例缩放图片</h1>
        </div>
        <div style="min-height: 100px;">
            <img src="img/test.png" alt="自动缩放后的效果" width="100" height="100" />
        </div>
        <button class="btn btn-default" onclick="javascript:DrawImage(document.querySelector('img'), 180, 80)">宽度,180,高80</button>
        <button class="btn btn-default" onclick="javascript:DrawImage(document.querySelector('img'), 200, 80)">宽200,高80</button>
        <button class="btn btn-default" onclick="javascript:DrawImage(document.querySelector('img'), 200, 180)">宽200,高180</button>
        <button class="btn btn-default" onclick="javascript:DrawImage(document.querySelector('img'), 250, 80)">宽250,高80</button>
        <button class="btn btn-default" onclick="javascript:DrawImage(document.querySelector('img'), 250, 180)">宽250,高180</button>
        <button class="btn btn-default" onclick="javascript:DrawImage(document.querySelector('img'), 500, 180)">宽500,高180</button>
    </div>
</body>

</html>