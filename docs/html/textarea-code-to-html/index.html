<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="前端HTML、JS、CSS代码片段、示例代码演示" />
    <meta name="keywords" content="HTML源码直接预览, DEMO, HTML, JS, CSS, jksdou" />
    <meta name="author" content="jksdou" />
    <title>HTML源码直接预览</title>
    <link href="../../assets/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="../../assets/css/style.css" rel="stylesheet" />
    <style>
        .html-source,
        #htmlView {
            height: 500px;
            border: 1px solid #ddd;
        }

        #textArea {
            width: 100%;
            height: 100%;
            border: none;
            resize: none;
        }

    </style>
    <script src="../../assets/lib/jquery/jquery.min.js" type="text/javascript"></script>
</head>

<body>
    <div class="container">
        <nav class="navbar navbar-default">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
                    <span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="../../index.html">DEMO</a>
            </div>
            <div id="navbar" class="collapse navbar-collapse">
                <p class="navbar-text">HTML源码直接预览</p>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="https://github.com/jksdou/html-demo" target="_blank">GitHub</a></li>
                </ul>
            </div>
        </nav>

        <div class="btn btn-default submit">提交</div>
        <a class="btn btn-link" href="https://github.com/jksdou/html-demo/blob/main/docs/html/textarea-code-to-html/index.html" target="_blank">查看源码</a>
        <hr>
        <div class="row">
            <div class="col-md-6">
                <h4>源码</h4>
                <div class="html-source" contenteditable="false">
                    <textarea id="textArea"></textarea>
                </div>
            </div>
            <div class="col-md-6">
                <h4>预览</h4>
                <div id="htmlView"></div>
            </div>
        </div>
    </div>
    <script type="text/javascript">
        function do_submit() {
            var frame = document.createElement('iframe')
            frame.width = '100%'
            frame.height = '100%'
            frame.frameBorder = 'none'
            htmlView.innerHTML = ''
            htmlView.appendChild(frame)
            // $('#html-view').html('').append(frame)
            var frame = frame.contentWindow ? frame.contentWindow : frame.contentDocument.document ? frame.contentDocument.document : frame.contentDocument
            frame.document.open()
            frame.document.write(textArea.value)
            frame.document.close()
        }
        $('.submit').click(do_submit)
        // 首次打开时，显示演示内容
        $(function () {
            $.get('demo.html').success(function (res) {
                textArea.innerHTML = res
                $('.submit').click()
            })
        })

    </script>
    <script src="../../assets/lib/bootstrap/js/bootstrap.min.js"></script>
</body>

</html>
